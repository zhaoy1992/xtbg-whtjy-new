<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html xmlns:fc xmlns:v="urn:schemas-microsoft-com:vml">
	<HEAD>
		<STYLE> .userData{behavior:url(#default#userData);}
	@import url(../css/dj.css); 
	</STYLE>
		<script src="../js/fcpub.js"></script>
		<script src="../js/fcrundj.js"></script>
		<script src="../js/tabpane.js"></script>		
		<script language="Javascript" type="text/javascript" src="../edit_area/edit_area_full.js" charset="GB2312"></script>
		<script language="Javascript" type="text/javascript">
		//alert(window.dialogArguments);
		// 初始化编辑控件
		editAreaLoader.init({
			id: "SKDBMemo1"	// 需要转换成编辑控件的textarea的ID		
			,start_highlight: false	
			,allow_resize: "both"
			,allow_toggle: false
			,word_wrap: false
			,language: "zh"
			,syntax: "js"	
			,EA_load_callback: "my_load"
			,replace_tab_by_spaces: 4
			,toolbar : "search,go_to_line,|,undo,redo,|,select_font,|,highlight,help"
		});
		</script>
	</HEAD>
	<body bgcolor="#d4d0c8" background="../images/ef_run_background.gif" onload="pub_window_onload()"
		onkeydown="RunTabindex()" onbeforeunload="pub_window_onbeforeunload()" onkeypress="pub_window_onkeypress()"
		onresize="pub_window_onresize()">
		<script>
var pubdjbh=parent.sOpenDjNo   
var pubEdit=false   			
var pubDataSet=null      
var pubRequest=parent.oRequest
pub_djhtm()
		</script>
<script>function uf_open() {
   pubdjbh = mydecode(pubdjbh);
   SKDBMemo1.value=pubdjbh
   uf_onresize()
  window.attachEvent( "onresize", uf_onresize )
  	SetButtonImage(SKButton1,"../images/ef_run_button_ok.gif");
	SetButtonImage(SKButton2,"../images/ef_run_button_close.gif");
}

function mydecode(str){
	var regexstr = "(\\[encode\\])(.*?)(\\[\\/encode\\])";
	var regex = new RegExp(regexstr,"g");
	var arr = str.match(regex);
	if(arr!=null){
		for(var i=0,len=arr.length;i<len;++i){
			str = str.replace(arr[i],UnSqlPropTrans(arr[i].match(new RegExp(regexstr,""))[2]));
		}
	}
	return str;
}
function my_load(id){
			editAreaLoader.setValue(id, pubdjbh);
		}
function uf_ok(){
   window.returnValue=editAreaLoader.getValue("SKDBMemo1");//SKDBMemo1.value ;
   window.close() ;

}
function uf_onresize(){
  SKbillsheet.style.width=document.body.clientWidth-SKbillsheet.style.pixelLeft-2
  SKbillsheet.style.height=document.body.clientHeight-SKbillsheet.style.pixelTop-33
  SKDBMemo1.style.width=SKbillsheet.style.posWidth-2
  SKDBMemo1.style.height=SKbillsheet.style.posHeight-1
  if (document.getElementById("frame_SKDBMemo1") != null)
  {
	document.getElementById("frame_SKDBMemo1").style.width=SKbillsheet.style.posWidth-2;
	document.getElementById("frame_SKDBMemo1").style.height=SKbillsheet.style.posHeight-1;
	//window.frames["frame_example_1"].style.width=SKbillsheet.style.posWidth-2;
	//window.frames["frame_example_1"].style.height=SKbillsheet.style.posHeight-1;
  }
}
function uf_maxwin(){
   window.dialogLeft=0
   window.dialogTop=0

   window.dialogWidth= screen.availWidth+"px"
   window.dialogHeight=screen.availHeight+"px"

}
</script><script src='../js/fcopendj.js'></script><script defer src='../js/fcsavedj.js'></script><script src='../js/fcstring.js'></script><script src='../js/fcnumdate.js'></script><script src='../js/fcselfuse.js'></script><script src='../js/fcbasecont.js'></script><script defer src='../js/fcother.js'></script><script defer src='../js/selectdate.js'></script><link href=../css/tabstyle.css type=text/css rel=stylesheet>
<DIV class=dj id=SKbillsheet onkeydown="" ondblclick="" toolbar="不带工具栏" BLONopen="uf_open()" blmode="其它" contxml="<root><SKButton><id>SKButton1</id><id>SKButton2</id><id>SKButton3</id></SKButton></root>" jslib="fcopendj.js&#13;&#10;fcsavedj.js&#13;&#10;fcstring.js&#13;&#10;fcnumdate.js&#13;&#10;fcselfuse.js&#13;&#10;fcbasecont.js&#13;&#10;fcother.js&#13;&#10;selectdate.js&#13;&#10;" billtaborder="<root><taborder>SKButton1</taborder><taborder>SKButton2</taborder><taborder>SKButton3</taborder></root>" dj_sn="userfunction" type="LR" caption="自定义函数" mkbh="E5" codeheader entertype="修改" poswidth="761" posheight="543" controlno="SKButton:3;SKDBedit:0;checkbox:0;label:0;radio:0;listbox:0;textarea:0;combobox:0;password:0;upload:0;SKDBtext:0;chart:0;dbimg:0;img:0;SKBILLgrid:0;shape:0;tab:0;div:0;SKDBTreeView:0;a:0;button:0;text:0;hr:0;checkboxlist:0;radiolist:0;dropdownlist:0;grid:0;dataset:0;spin:0;excel:0;tree:0" keyfield window="当前窗口" posleft postop isfile="否" idtype="1" center="居中" dj_id="330" para="<r></r>"><SPAN id=Label1 style="DISPLAY: block; FONT-WEIGHT: bold; FONT-SIZE: 19px; LEFT: 8px; WIDTH: 169px; COLOR: #0000ff; FONT-FAMILY: 楷体_GB2312; POSITION: absolute; TOP: 8px; HEIGHT: 19px; TEXT-DECORATION: underline" align="Left">用户自定义的函数</SPAN>
<br><br>
<TEXTAREA id=SKDBMemo1 style="DISPLAY: block; FONT-SIZE: 12px; LEFT: 0px; WIDTH: 752px; COLOR: #000000; FONT-FAMILY: 宋体; POSITION: absolute; TOP: 34px; HEIGHT: 480px; BACKGROUND-COLOR: #ffffff" dataset="" onclick='bill_onclick("")' field="" onfocus='bill_onenter("")' onblur='bill_onexit("")' onkeydown='bill_onkeydown("")'></TEXTAREA><INPUT id=SKButton1 style="DISPLAY: block; FONT-SIZE: 12px; LEFT: 332px; WIDTH: 75px; COLOR: #000000; FONT-FAMILY: 宋体; POSITION: absolute; TOP: 3px; HEIGHT: 25px; BACKGROUND-COLOR: #d4d0c8" type=button controltype="SKButton" dropstyle="否" onclick='bill_onclick("uf_ok()")'><INPUT id=SKButton2 style="DISPLAY: block; FONT-SIZE: 12px; LEFT: 414px; WIDTH: 75px; COLOR: #000000; FONT-FAMILY: 宋体; POSITION: absolute; TOP: 4px; HEIGHT: 25px; BACKGROUND-COLOR: #d4d0c8" type=button controltype="SKButton" dropstyle="否" onclick='bill_onclick("exitbill")'><INPUT id=SKButton3 style="DISPLAY: block; FONT-SIZE: 12px; LEFT: 251px; WIDTH: 75px; COLOR: #000000; FONT-FAMILY: 宋体; POSITION: absolute; TOP: 3px; HEIGHT: 25px; BACKGROUND-COLOR: #d4d0c8" type=button value=最大化 controltype="SKButton" dropstyle="否" onclick='bill_onclick("uf_maxwin()")'></DIV></body></html>